<?xml version="1.0"?>

<project name="OpenSextant-Client" >

  <property environment="env"/>
  <property name="version" value="0.8"/>
  <!-- OS dependent things? -->
  <property name="opensextant.home" value="/mitre/opensextant" />
  <property name="solr_home" value="${opensextant.home}/solr" />
  <property name="gate_home" value="${opensextant.home}/gate" />
  
  <!-- Processing choices. -->
  <property name="solr_gapp" value="OpenSextant_Solr" />
  <property name="mysql_gapp" value="OpenSextant_MySQL" />
  <property name="mysql_gapp_plus" value="OpenSextant_MySQLWithPhoneticsAndCaseDetector" />

  <property name="test.dir" value="${opensextant.home}/test" />
  
  <path id="runtime.classpath">
    <pathelement location="${opensextant.home}/etc" />  
    <fileset dir="${opensextant.home}/lib" includes="**/*.jar" />
  </path>


  <target name="run-solr">
    <echo >Run OpenSextant w/Solr makes use of SOLR_HOME = ${solr_home}
      and GATE_HOME = ${gate_home}.   GAPP is the ${solr_gapp}
    </echo>
    <java  classname="org.mitre.opensextant.apps.OpenSextantRunner" classpathref="runtime.classpath" fork="yes" >

      <jvmArg value="-Xmx2500m"/>
      <jvmArg value="-Djava.library.path=${env.LD_LIBRARY_PATH}"/>
      <jvmArg value="-Dopensextant.home=${opensextant.home}"/>
      <!-- SOLR HOME 
      <jvmArg value="-Dsolr.solr.home=${solr_home}"/>
      -->
      <!-- GATE user config, plugins, etc. 
      <jvmArg value="-Dgate.home=${gate_home}"/>
      <jvmArg value="-Dgate.user.config=${gate_home}/user-gate.xml"/>
      <jvmArg value="-Dgate.plugins.home=${gate_home}/plugins"/>
      <jvmArg value="-Dgate.user.session=x"/>
      -->

      <arg value="-i" />
      <arg value="${inputfile}" />
      <arg value="-f" />
      <arg value="${format}" />
      <arg value="-o" />
      <arg value="${outputfile}" />
      <arg value="-t" />
      <arg value="${test.dir}/temp" />
      <arg value="-g" />
      <arg value="${gate_home}/${solr_gapp}.gapp" />

    </java>
  </target>
  
  
  <target name="test-solr">
    <echo >Testing OpenSextant w/Solr makes use of SOLR_HOME = ${solr_home}
      and GATE_HOME = ${gate_home}.   GAPP is the ${solr_gapp} 
    </echo>
    <java  classname="org.mitre.opensextant.apps.OpenSextantRunner" classpathref="runtime.classpath" fork="yes" >
      
      <jvmArg value="-Xmx2500m"/>
      <!-- OPENSEXTANT HOME -->
      <jvmArg value="-Dopensextant.home=${opensextant.home}"/>
      
      <arg value="-i" />
      <arg value="${test.dir}/test.txt" />
      <arg value="-f" />
      <arg value="CSV" />
      <arg value="-o" />
      <arg value="${outputfile}" />
      <arg value="-t" />
      <arg value="${test.dir}/temp" />
      <arg value="-g" />
      <arg value="${gate_home}/${solr_gapp}.gapp" />
    
    </java>
  </target>


  <target name="test-solr-v10">
    <echo >Testing OpenSextant w/Solr makes use of SOLR_HOME = ${solr_home}
      and GATE_HOME = ${gate_home}.   GAPP is the ${solr_gapp}
    </echo>
    <java  classname="org.mitre.opensextant.apps.OpenSextantRunner" classpathref="runtime.classpath" fork="yes" >

      <jvmArg value="-Xmx2500m"/>
      <!-- SOLR HOME -->
      <jvmArg value="-Dsolr.solr.home=${solr_home}"/>
      <!-- GATE user config, plugins, etc.  -->
      <jvmArg value="-Dgate.home=${gate_home}"/>
      <jvmArg value="-Dgate.user.config=${gate_home}/user-gate.xml"/>
      <jvmArg value="-Dgate.plugins.home=${gate_home}/plugins"/>
      <jvmArg value="-Dgate.user.session=x"/>

      <arg value="-i" />
      <arg value="${test.dir}/test.txt" />
      <arg value="-f" />
      <arg value="CSV" />
      <arg value="-o" />
      <arg value="${outputfile}" />
      <arg value="-t" />
      <arg value="${test.dir}/temp" />
      <arg value="-g" />
      <arg value="${gate_home}/${solr_gapp}.gapp" />

    </java>
  </target>

  
  <target name="test-mysql">
    <echo >Testing OpenSextant w/MySQL makes has no SOLR -- this script is a copy of test-solr.
      It differs by two things -- no SOLR HOME and a different GAPP.
      and GATE_HOME = ${gate_home}.   GAPP is the ${mysql_gapp} 
    </echo>
    
    <java  classname="org.mitre.opensextant.apps.OpenSextantRunner" classpathref="runtime.classpath" fork="yes" >
      <jvmArg value="-Xmx1500m"/>
      <!-- SOLR HOME -->
      <!-- 
      <jvmArg value="-Dsolr.solr.home=${solr_home}"/>
      -->
      <!-- GATE user config, plugins, etc.  -->
      <jvmArg value="-Dgate.home=${gate_home}"/>
      <jvmArg value="-Dgate.user.config=${gate_home}/user-gate.xml"/>
      <jvmArg value="-Dgate.plugins.home=${gate_home}/plugins"/>
      <jvmArg value="-Dgate.user.session=x"/>
      
      <arg value="-i" />
      <arg value="${test.dir}/test.txt" />
      <arg value="-f" />
      <arg value="CSV" />
      <arg value="-o" />
      <arg value="${outputfile}" />
      <arg value="-t" />
      <arg value="${test.dir}/temp" />
      <arg value="-g" />
      <!-- <arg value="${gate_home}/${mysql_gapp}.gapp" /> -->
      <arg value="${gate_home}/${mysql_gapp_plus}.gapp" />
    
    </java>
  </target>


  <target name="run-mysql">
    <echo >Testing OpenSextant w/MySQL makes has no SOLR -- this script is a copy of test-solr.
      It differs by two things -- no SOLR HOME and a different GAPP.
      and GATE_HOME = ${gate_home}.   GAPP is the ${mysql_gapp}
    </echo>

    <java  classname="org.mitre.opensextant.apps.OpenSextantRunner" classpathref="runtime.classpath" fork="yes" >
      <jvmArg value="-Xmx1500m"/>
      <!-- SOLR HOME -->
      <!-- 
      <jvmArg value="-Dsolr.solr.home=${solr_home}"/>
      -->
      <!-- GATE user config, plugins, etc.  -->
      <jvmArg value="-Dgate.home=${gate_home}"/>
      <jvmArg value="-Dgate.user.config=${gate_home}/user-gate.xml"/>
      <jvmArg value="-Dgate.plugins.home=${gate_home}/plugins"/>
      <jvmArg value="-Dgate.user.session=x"/>

      <arg value="-i" />
      <arg value="${inputfile}" />
      <arg value="-f" />
      <arg value="CSV" />
      <arg value="-o" />
      <arg value="${outputfile}" />
      <arg value="-t" />
      <arg value="${test.dir}/temp" />
      <arg value="-g" />
      <arg value="${gate_home}/${mysql_gapp}.gapp" />

    </java>
  </target>

  

</project>
