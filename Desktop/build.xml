<!--======================================================================

Build file for OpenSextant Desktop

=======================================================================-->
<project name="OpenSextantDesktop" basedir="." default="compile">

    <property name="version" value="1.3" />


    <!-- Name of the project -->
    <property name="project.name" value="OpenSextantDesktop" />
    <property name="java_level" value="1.7" />

    <property file="build.properties" />
	
    <!-- directory to contain the jar -->
    <property name="build.dir" location="build" />
    <property name="dist.dir" location="dist" />

    <path id="compile.classpath">

	    <!-- project level libraries -->
	    <pathelement location="${opensextant.home}/lib/OpenSextantToolbox.jar" />
	    <pathelement location="${opensextant.home}/lib/opensextant-apps.jar" />
	    <pathelement location="${opensextant.home}/lib/opensextant-commons.jar" />
	    <pathelement location="${opensextant.home}/lib/opensextant-xponents-1.6.jar" />
	    <pathelement location="${opensextant.home}/lib/commons-lang-2.6.jar" />
	
	    <pathelement location="${opensextant.home}/lib/slf4j-api-1.7.4.jar" />
	    <pathelement location="${opensextant.home}/lib/slf4j-log4j12-1.7.4.jar" />
	
	    <pathelement location="${opensextant.home}/lib/log4j-1.2.17.jar" />

    </path>

    <!-- JavaDoc documentation directory -->
    <property name="javadoc.dir" location="${basedir}/doc/javadoc" />

    <!-- compile the source -->
    <target name="compile" depends="setup" >
        <javac classpathref="compile.classpath" srcdir="src" destdir="${build.dir}" 
            debug="true" debuglevel="lines,source" source="${java_level}" encoding="utf-8" />
    	
    	<copy todir="${build.dir}">
    	    <fileset dir="src" includes="**/*.png" />
    	</copy>
    </target>


    <target name="setup" >
        <mkdir dir="${build.dir}" />
    </target>
    <target name="clean" >
        <delete dir="${build.dir}" />
    </target>
	
    <target name="release" depends="compile">
        <delete dir="${dist.dir}" />
    	<mkdir dir="${dist.dir}" />
	    <jar destfile="${dist.dir}/${project.name}-${version}.jar" basedir="${build.dir}" manifest="${basedir}/MANIFEST.MF"/>
		<copy todir="${dist.dir}/lib">
			<fileset dir="${opensextant.home}/lib">
				<include name="*.jar"/>
			</fileset>
		</copy>

    </target>
	
	<target name="release-full" depends="release">
		<copy todir="${dist.dir}/opensextant">
			<fileset dir="${opensextant.home}">
				<include name="**"/>
			</fileset>
		</copy>
	</target>



     <!-- create the JAR files -->
    <target name="jar" depends="compile">
        <jar destfile="build/${project.name}.jar" update="false" basedir="${build.dir}" >
            <include name="org/**"/>
        </jar>
        <jar destfile="build/${project.name}.jar" update="true" basedir="${basedir}/src" >
            <include name="org/mitre/opensextant/desktop/icons/**.png" />
        </jar>
        <jar destfile="build/${project.name}.jar" update="true" basedir="${basedir}/src" >
            <include name="org/mitre/opensextant/desktop/**.form" />
        </jar>
    </target>

</project>

